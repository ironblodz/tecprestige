(()=>{"use strict";const e=window.wc.wcBlocksRegistry,t=window.wp.i18n,n=window.wc.wcSettings,o=window.wp.htmlEntities,a=window.React,c=(0,n.getSetting)("mbway_ifthen_for_woocommerce_data",{}),r=(0,t.__)("MB WAY (IfthenPay)","multibanco-ifthen-software-gateway-for-woocommerce"),l=(0,o.decodeEntities)(c.title)||r,i=e=>{const[n,r]=(0,a.useState)(""),{eventRegistration:l,emitResponse:i}=e,{onPaymentProcessing:s}=l;(0,a.useEffect)((()=>{const e=s((async()=>{const e=n;return 9==e.length?{type:i.responseTypes.SUCCESS,meta:{paymentMethodData:{mbway_ifthen_for_woocommerce_phone:e}}}:{type:i.responseTypes.ERROR,message:(0,t.__)("Invalid MB WAY phone number","multibanco-ifthen-software-gateway-for-woocommerce")}}));return()=>{e()}}),[i.responseTypes.ERROR,i.responseTypes.SUCCESS,s,n]);var m=React.createElement("p",null,(0,o.decodeEntities)(c.description||"")),p=React.createElement("input",{type:"tel",name:c.id+"_phone",id:c.id+"_phone",placeholder:"9xxxxxxxx",autoComplete:"off",maxLength:"9",required:!0,value:n,onChange:e=>{const t=e.target.value.replace(/\D/g,"");r(t)}}),w=React.createElement("label",{htmlFor:c.id+"_phone"},(0,o.decodeEntities)(c.phonenumbertext||"")),d=React.createElement("div",{className:"wc-block-components-text-input is-active"},"",p,w);return React.createElement("div",null,m,d)},s={name:"mbway_ifthen_for_woocommerce",label:React.createElement((e=>{var t=React.createElement("img",{src:c.icon,width:28,height:24,style:{display:"inline"}});return React.createElement("span",{className:"wc-block-components-payment-method-label wc-block-components-payment-method-label--with-icon"},t,(0,o.decodeEntities)(c.title)||r)}),null),content:React.createElement(i,null),edit:React.createElement(i,null),icons:null,canMakePayment:e=>{if("EUR"!=e.cartTotals.currency_code)return!1;if(c.only_portugal&&"PT"!=e.billingData.country&&"PT"!=e.shippingAddress.country)return!1;var t=e.cartTotals.total_price/100;return!(c.only_above&&t<c.only_above||c.only_bellow&&t>c.only_bellow)},ariaLabel:l,supports:{features:c.supports}};(0,e.registerPaymentMethod)(s)})();